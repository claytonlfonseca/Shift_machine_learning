setwd("~/Codes/personal_github/Shift_machine_learning/Aula_5_-_6-Probabilidades_Decision_Tree")
d <- read.csv("train.csv")
install.packages("party")
library(party)
mod <- ctree(Survived~Sex, data=d)
plot(mod, type="simple")
mod <- ctree(Survived~Sex+Pclass, data=d)
plot(mod, type="simple")
View(d)
mod <- ctree(Survived~Sex+Pclass+Age, data=d)
plot(mod, type="simple")
library(sqldf)
sqldf("select Age, count() from d where Sex='Female group by Age'")
sqldf("select Age, count() from d where Sex='Female' group by Age")
sqldf("select Age from d where Sex='Female' group by Age")
sqldf("select Age from d group by Age")
sqldf("select Age from d where Sex='Female' group by Age")
sqldf("select Age from d where Sex='Male' group by Age")
sqldf("select Age from d where Sex='female' group by Age")
sqldf("select Age, count() from d where Sex='female' group by Age")
d <- read.csv("trains.csv")
d <- read.csv("train.csv")
set.seed(33)
va<-sample(891)
treino<-d[1:600,]
teste<-d[601:891,]
mod <- ctree(Survived~Sex+Pclass, data=treino)
d <- read.csv("train.csv")
set.seed(33)
va<-sample(891)
treino<-d[va[1:600],]
teste<-d[va[601:891],]
mod <- ctree(Survived~Sex+Pclass, data=treino)
summary(mod)
p <- predict(mod, newdata=teste)
plot(mod, type="simple")
p <- predict(mod, newdata=teste)
prev <- ifelse(p<.5,0,1)
cbind(prev, teste$Survived)
cbind(prev, teste$Survived, ifelse(prev==teste$Survived,1,0))
sum(prev==teste$Survived,1,0)
sum(prev==teste$Survived,1,0)/291
table(prev, teste$Survived)
d <- read.csv("train.csv")
set.seed(33)
va<-sample(891)
treino<-d[va[1:600],]
teste<-d[va[601:891],]
mod <- ctree(Survived~Sex+Pclass+Age, data=treino)
plot(mod, type="simple")
# Previsão
p <- predict(mod, newdata=teste)
prev <- ifelse(p<.5,0,1)
table(prev, teste$Survived)
d <- read.csv("train.csv")
set.seed(33)
va<-sample(891)
treino<-d[va[1:600],]
teste<-d[va[601:891],]
#mod <- ctree(Survived~Sex+Pclass+Age, data=treino)
mod <- ctree(Survived~Sex+Age, data=treino)
plot(mod, type="simple")
# Previsão
p <- predict(mod, newdata=teste)
prev <- ifelse(p<.5,0,1)
table(prev, teste$Survived)
table(teste$Survived, prev)
sqldf("select Fare, count() from d group by Fare")
sqldf("select Fare, count() from d group by Fare order by 2")
sqldf("select Fare, count() from d group by Fare order by 2 desc")
v1<-1:6
cat<-data.frame(cbind(v1,b2))
cat<-data.frame(cbind(v1,v2))
source('~/Codes/personal_github/Shift_machine_learning/Aula_5_-_6-Probabilidades_Decision_Tree/Aula_5.R', echo=TRUE)
v1<-1:6
v2<-factor(c(1,2,3,3,3,1))
cat<-data.frame(cbind(v1,v2))
sqldf("select Fare, count() from d group by Fare order by 2 desc")
sqldf("select Fare, count() from d group by Fare order by 1 desc")
sqldf("select *, 1 from d")
d <- read.csv("train.csv")
sqldf("select *, 1 from d")
sqldf("select *, 1 from d limit 10")
sqldf("select * from d limit 10")
sqldf("select * from d limit 10")
d <- read.csv("train.csv")
sqldf("select * from d limit 10")
sqldf("select * from d ")
cat$v2 <- as.factor(d$v2)
d <- read.csv("train.csv")
set.seed(33)
va<-sample(891)
treino<-d[va[1:600],]
teste<-d[va[601:891],]
#mod <- ctree(Survived~Sex+Pclass+Age, data=treino)
mod <- ctree(Survived~Sex+Age, data=treino)
plot(mod, type="simple")
# Previsão
p <- predict(mod, newdata=teste)
prev <- ifelse(p<.5,0,1)
rbind(cat,c(7,4))
v1<-1:6
v2<-factor(c(1,2,3,3,3,1))
cat<-data.frame(cbind(v1,v2))
cat$v2 <- as.factor(d$v2)
rbind(cat,c(7,4))
levels(cat$v2)
v1<-1:6
v2<-factor(c(1,2,3,3,3,1))
levels(cat$v2)
v2<-factor(c(1,2,3,3,3,1))
levels(cat$v2)
cat<-data.frame(cbind(v1,v2))
levels(cat$v2)
v1<-1:6
v2<-factor(c(1,2,3,3,3,1))
cat<-data.frame(cbind(v1,v2))
cat$v2 <- as.factor(d$v2)
v1<-1:6
v2<-factor(c(1,2,3,3,3,1))
cat<-data.frame(cbind(v1,v2))
cat$v2 <- as.factor(d$v2)
cat$v2 <- as.factor(cat$v2)
levels(cat$v2)
levels(cat$v2)<-c(levels(cat$v2), "4")
levels((cat$v2))
rbind(cat,c(7,4))
d3 <- read.csv("train.csv")
sqldf("select * from d3 limit 10")
sqldf("select * from d3")
View(mod)
View(d3)
d <- read.csv("train.csv")
d$Pclass_c <- as.factor(d$Pclass)
set.seed(33)
va<-sample(891)
treino<-d[va[1:600],]
teste<-d[va[601:891],]
mod <- ctree(Suvived~Sex+Age, data=treino)
mod <- ctree(Survived~Sex+Age, data=treino)
plot(mod, type="simple")
p <- predict(mod, newdata=teste)
prev <- ifelse(p<.5,0,1)
table(prev, teste$Survived)
d <- read.csv("train.csv")
# 2. Tratamento de Variaveis
d$Pclass_c <- as.factor(d$Pclass)
#d$Fare_c <- as.factor(d$Fare)
# 3. Separação Treino e Teste
set.seed(33)
va<-sample(891)
treino<-d[va[1:600],]
teste<-d[va[601:891],]
# 4. Modelagem
mod <- ctree(Survived~Sex+Pclass_c, data=treino)
plot(mod, type="simple")
p <- predict(mod, newdata=teste)
# 5. Analise de resultados
prev <- ifelse(p<.5,0,1)
table(prev, teste$Survived)
dl <- read.csv("train.csv")
dl$Pclass_c <- as.factor(dl$Pclass)
dl$Fare_c <- as.factor(dl$Fare)
set.seed(33)
va<-sample(891)
treino<-d[va[1:600],]
teste<-d[va[601:891],]
mod <- ctree(Survived~Sex+Pclass_c+Fare_c, data=treino)
mod <- ctree(Survived~Sex+Pclass_c+Fare_c, data=treino)
dl$Fare_c <- as.factor(dl$Fare)
set.seed(33)
dl <- read.csv("train.csv")
dl$Pclass_c <- as.factor(dl$Pclass)
dl$Fare_c <- as.factor(dl$Fare)
set.seed(33)
va<-sample(891)
treino<-dl[va[1:600],]
teste<-dl[va[601:891],]
mod <- ctree(Survived~Sex+Pclass_c+Fare_c, data=treino)
plot(mod, type="simple")
View(treino)
dl <- read.csv("train.csv")
dl$Pclass_c <- as.factor(dl$Pclass)
dl$Age_c <- as.factor(dl$Age)
set.seed(33)
va<-sample(891)
treino<-dl[va[1:600],]
teste<-dl[va[601:891],]
mod <- ctree(Survived~Sex+Pclass_c+Age_c, data=treino)
plot(mod, type="simple")
p <- predict(mod, newdata=teste)
prev <- ifelse(p<.5,0,1)
table(prev, teste$Survived)
dl <- read.csv("train.csv")
